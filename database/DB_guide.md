# Database 선택 가이드

이번 포스팅에서는 RDB 부터 검색엔진까지 강점과 약점을 알아보고, 어떠한 경우에 각 DB들을 적용하면 좋을지 정리해 보자.



### RDB (Relation Database)

관계형 데이터베이스로, 가장 오래되고 많이 알려져있다. Mysql, Oracle, PostgreSql등이 속해 있다. 여기서 **관계(Relation)란** **key와 value의 관계**를 말하며 RDB에서는 이러한 관계들을 **Shcema를 가지는 Table**로 표현하여. 데이터들은 이 Schema를 통해 여러 개의 테이블에 분산되어진다. RDB는 아래와 같은 특징을 가진다.

**강점**

- 데이터 타입과 Constraint를 통해 **데이터 무결성을 보장**함으로 데이터 품질을 향샹시킴
- 정형화된 데이터 처리에 적합하며 ACID 트랜잭션을 지원한다.
- 대부분의 생태계를 장악하고 있어, 엔진 지원 및 참고 자료들이 풍부하다.
- 정규화, 튜닝등 성능향샹을 위한 여러가지 기능들을 제공한다.

**약점**

* 비정형 데이터 처리에 한계가 있다.
* 고정된 Schema에 대해 변경이 힘들다.

- 구성과 확장에 많은 비용이 드는 경향이 있다.
  - **서버를 여러 개 더 추가하는 방식의 수평 확장(Scale Out)**은 **서버 하나에 자원을 더 추가하는 수직 확장(Scale Up)**에 비해 더 빠르고 경제적인 경우가 대부분이다. 그러나 RDB에서는 정형화된 구조때문에 Scale Out 과정이 복잡하다. (샤딩이 있지만 제한이 있고 구현이 어렵다)

**적합한 상황**

​	데이터의 완전성이 무엇보다 중요한 상황, 재무 응용프로그램, 방어 및 보안, 개인 건강 정보등이 대표적이다. 이 밖에도 고도로 정형화된 데이터, 내부 프로세스의 자동화 등에 적합하다.



### Document DB

데이터를 JSON, BSON 또는 XML 문서에 저장하는 비관계형 데이터베이스로 **유연한 스키마가 특징**이다. 스키마를 지정하지 않고 데이터를 입력 할 수 있고, 정형화된 구조를 강요하지 않는다. Document 기반으로 RDB와 비교했을 때 큰 하나의 테이블을 사용한다고 생각 할 수 있다.  대표적인 예로 몽고DB, Couchbase 등이 있다.

**강점**

- 매우 유연하여, 반정형 또는 비정형 데이터 처리에 적합하다.
- 수평확장(Scale Out)에 용이하고 직관적이다.

**약점**

- 유연성을 위해 ACID 준수를 희생 ( ex) 스키마가 유동적으로 변화함으로 저장된 데이터들의 일관성이 깨질 수 있다.)
- 쿼리는 하나의 Document 내에서만 가능하며, 여러 Document에 걸친 쿼리는 불가능하다.



**적합한 상황**

 데이터의 정확성보다 양이 중요한 빅데이터에 적합, 스키마를 작성하지 않고 시작이 가능하기에 빠른 프로토 타입등에 적합하다.



### In Memory DB

각 값이 특정 키와 연관된 비 관계형 데이터베이스의 일종으로 디스크가 아닌 메인 메모리에 모든 데이터를 저장한다. 때문에 데이터 접근이 훨씬 빠른 것이 장점이나 그 **크기의 한계와 휘발성이라는 단점을 가지고 있어 주로 캐시 저장소로 많이 사용**된다. 대표적으로 Redis, Memcached등이 있다. 

> 휘발성을 보완하기 위해, 메모리에 CRUD 된 값들을 모두 디스크에 로그로 기록하기도 하고, 재구동 될 때 디스크로부터 로그파일을 읽어와 메모리에 구조를 재 구축하기도 한다.

**강점**

- 메모리에 데이터를 보관하기 때문에 데이터 접근이 매우 빠르다.
- 코드를 다시 작성하지 않고도, 한 시스템에서 다른 시스템으로 옮길 수 있다.

**약점**

- 가격이 비싸고, 데이터 안전성이 떨어진다.

**적합한 곳**

 세션관리, 자주 접근하지만 자주 업데이트 되지 않는 데이터에 적합

